{"version":3,"sources":["src/index.js"],"names":["lastHole","timeUp","board","document","querySelector","holes","querySelectorAll","vie","lvl","vitMin","vitMax","getElementById","innerHTML","startButton","nextButton","coin","Audio","Bump","startSound","nextSound","endSound","randTime","min","max","Math","round","random","randHole","idx","hole","floor","length","peep","time","classList","add","setTimeout","vieBoard","thend","contains","play","remove","style","top","console","log","oneLife","addEventListener","playbackRate","disabled","lvlBoard","e","target","parentElement"],"mappings":";;;AA8JA,aA9JA,QAAA,gBACA,IAMIA,EACAC,EAPEC,EAAQC,SAASC,cAAc,SAC/BC,EAAQF,SAASG,iBAAiB,SAGpCC,EAAM,EACNC,EAAM,EAGNC,EAAS,KACTC,EAAS,KAGbP,SAASQ,eAAe,OAAOC,UAI/B,wLACA,IAAIC,EAAcV,SAASC,cAAc,UACrCU,EAAaX,SAASC,cAAc,SAGpCW,EAAO,IAAIC,MAAM,sBACjBC,EAAO,IAAID,MAAM,sBACjBE,EAAa,IAAIF,MAAM,8BACvBG,EAAY,IAAIH,MAAM,mBACtBI,EAAW,IAAIJ,MAAM,qBAEzB,SAASK,EAASC,EAAKC,GACdC,OAAAA,KAAKC,MAAMD,KAAKE,UAAYH,EAAMD,GAAOA,GAIlD,SAASK,EAAStB,GACVuB,IACAC,EAAOxB,EADDmB,KAAKM,MAAMN,KAAKE,SAAWrB,EAAM0B,SAGzCF,OAAAA,IAAS7B,EAEJ2B,EAAStB,IAElBL,EAAW6B,EACJA,GAIT,SAASG,IACDC,IAAAA,EAAOZ,EAASZ,EAAQC,GACxBmB,EAAOF,EAAStB,GACtBwB,EAAKK,UAAUC,IAAI,MAEnBC,WAAW,WACLC,IAAAA,EAAWlC,SAASC,cAAc,QAClCkC,EAAQnC,SAASC,cAAc,UAQ/BG,GAPAsB,EAAKK,UAAUK,SAAS,QAC1BtB,EAAKuB,OACLjC,GAAY,EACZ8B,EAASzB,UAAYL,GAEvBsB,EAAKK,UAAUO,OAAO,MAElBlC,EAAM,EAIR,OAHAa,EAASoB,OACTH,EAASzB,UAAY,iBACrB0B,EAAMI,MAAMC,IAAM,QAGpBC,QAAQC,IAAItC,GACPN,GAAQ+B,KACZC,GAIL,SAASa,IACDb,IAAAA,EAAOZ,EAASZ,EAAQC,GACxBmB,EAAOF,EAAStB,GACtBwB,EAAKK,UAAUC,IAAI,OAEnBC,WAAW,WACLC,IAAAA,EAAWlC,SAASC,cAAc,QAClCkC,EAAQnC,SAASC,cAAc,UAM/BG,GALAsB,EAAKK,UAAUK,SAAS,QAC1BtB,EAAKuB,OAEPX,EAAKK,UAAUO,OAAO,OAElBlC,EAAM,EAIR,OAHAa,EAASoB,OACTH,EAASzB,UAAY,iBACrB0B,EAAMI,MAAMC,IAAM,QAIf1C,GAAQ+B,KACZC,GAGLpB,EAAYkC,iBAAiB,QAAS,WACpC7B,EAAW8B,aAAe,IAC1B9B,EAAWsB,OACX3B,EAAYoC,UAAW,EACjBC,IAAAA,EAAW/C,SAASC,cAAc,QACpCiC,EAAWlC,SAASC,cAAc,QAClCkC,EAAQnC,SAASC,cAAc,UAEnCiC,EAASzB,UAAY,EACrB0B,EAAMI,MAAMC,IAAM,MAClB1C,GAAS,EACTM,EAAM,EACNC,EAAM,EACNC,EAAS,KACTC,EAAS,KACTwC,EAAStC,UAAYJ,EAErBwB,IAEAI,WAAW,WACTU,KACCzB,EAAS,KAAM,MAElBe,WAAW,WACTnC,GAAS,EACTY,EAAYoC,UAAW,EACnB1C,GAAO,IACTC,GAAY,EACZK,EAAYoC,UAAW,EACvBnC,EAAWmC,UAAW,EACtBC,EAAStC,UAAYJ,IAEtB,OAILM,EAAWiC,iBAAiB,QAAS,WAC7BG,IAAAA,EAAW/C,SAASC,cAAc,QACxCe,EAAUqB,OACV1B,EAAWmC,UAAW,EACtBhD,GAAS,EAET+B,IACAI,WAAW,WACTU,KACCzB,EAAS,KAAM,MAElBX,GAAkB,IAClBD,GAAkB,IAClB2B,WAAW,WACTnC,GAAS,EACTY,EAAYoC,UAAW,EACnB1C,GAAO,IACTC,GAAY,EACZK,EAAYoC,UAAW,EACvBnC,EAAWmC,UAAW,EACtBC,EAAStC,UAAYJ,IAEtB,OAGLN,EAAM6C,iBAAiB,QAAS,SAACI,GAC3Bd,IAAAA,EAAWlC,SAASC,cAAc,QAClCkC,EAAQnC,SAASC,cAAc,UAGjC+C,EAAEC,OAAOlB,UAAUK,SAAS,SAC5BY,EAAEC,OAAOC,cAAcnB,UAAUK,SAAS,OAE1CxB,EAAKiC,aAAe,IACpBjC,EAAKyB,OACLW,EAAEC,OAAOC,cAAcnB,UAAUO,OAAO,OAExCU,EAAEC,OAAOlB,UAAUK,SAAS,SAC5BY,EAAEC,OAAOC,cAAcnB,UAAUK,SAAS,QAE1CxB,EAAKiC,aAAe,IACpBjC,EAAKyB,OAELjC,GAAY,EACZ8B,EAASzB,UAAYL,EACrB4C,EAAEC,OAAOC,cAAcnB,UAAUO,OAAO,SAGxCxB,EAAKuB,OACLjC,GAAY,EACZ8B,EAASzB,UAAYL,GAGnBA,EAAM,IACRa,EAASoB,OACTH,EAASzB,UAAY,YACrB0B,EAAMI,MAAMC,IAAM","file":"src.ec2caa47.js","sourceRoot":"..","sourcesContent":["import \"./styles.css\";\r\nconst board = document.querySelector(\".game\");\r\nconst holes = document.querySelectorAll(\".hole\");\r\n\r\n//const moles = document.querySelectorAll(\".mole\");\r\nlet vie = 5;\r\nlet lvl = 1;\r\nlet lastHole;\r\nlet timeUp;\r\nlet vitMin = 1400;\r\nlet vitMax = 2800;\r\n\r\n//Head Board\r\ndocument.getElementById(\"app\").innerHTML = `\r\n<h2>Vie(s) &#9825 : <span class=\"vie\"></span></h2><h2>Level: <span class=\"lvl\"></span> </h2>\r\n<button class=\"start\">Start</button><button disabled class=\"next\">Next lvl</button>\r\n`;\r\n//Button\r\nlet startButton = document.querySelector(\".start\");\r\nlet nextButton = document.querySelector(\".next\");\r\n\r\n//Sound\r\nlet coin = new Audio(\"src/Coin_Sound.mp3\"); // buffers automatically when created\r\nlet Bump = new Audio(\"src/Bump_Sound.mp3\");\r\nlet startSound = new Audio(\"src/Mario_Sound_Effect.mp3\");\r\nlet nextSound = new Audio(\"src/Woo_Hoo.mp3\");\r\nlet endSound = new Audio(\"src/Game_Over.mp3\");\r\n//random time\r\nfunction randTime(min, max) {\r\n  return Math.round(Math.random() * (max - min) + min);\r\n}\r\n\r\n//Random trou\r\nfunction randHole(holes) {\r\n  const idx = Math.floor(Math.random() * holes.length);\r\n  const hole = holes[idx];\r\n\r\n  if (hole === lastHole) {\r\n    //si identique au dernier alors on relance\r\n    return randHole(holes);\r\n  }\r\n  lastHole = hole;\r\n  return hole;\r\n}\r\n\r\n//vitesse et animation du Mush\r\nfunction peep() {\r\n  const time = randTime(vitMin, vitMax);\r\n  const hole = randHole(holes);\r\n  hole.classList.add(\"up\");\r\n  //console.log(\"peep\", time, hole);\r\n  setTimeout(() => {\r\n    let vieBoard = document.querySelector(\".vie\");\r\n    let thend = document.querySelector(\".thend\");\r\n    if (hole.classList.contains(\"up\")) {\r\n      Bump.play();\r\n      vie = vie - 1;\r\n      vieBoard.innerHTML = vie;\r\n    }\r\n    hole.classList.remove(\"up\");\r\n\r\n    if (vie < 0) {\r\n      endSound.play();\r\n      vieBoard.innerHTML = \"Game Over\";\r\n      thend.style.top = \"-90%\";\r\n      return;\r\n    }\r\n    console.log(vie);\r\n    if (!timeUp) peep();\r\n  }, time);\r\n}\r\n\r\n//gain onelife\r\nfunction oneLife() {\r\n  const time = randTime(vitMin, vitMax);\r\n  const hole = randHole(holes);\r\n  hole.classList.add(\"up2\");\r\n  //console.log(\"peep\", time, hole);\r\n  setTimeout(() => {\r\n    let vieBoard = document.querySelector(\".vie\");\r\n    let thend = document.querySelector(\".thend\");\r\n    if (hole.classList.contains(\"up2\")) {\r\n      Bump.play();\r\n    }\r\n    hole.classList.remove(\"up2\");\r\n\r\n    if (vie < 0) {\r\n      endSound.play();\r\n      vieBoard.innerHTML = \"Game Over\";\r\n      thend.style.top = \"-90%\";\r\n      return;\r\n    }\r\n    //console.log(vie);\r\n    if (!timeUp) peep();\r\n  }, time);\r\n}\r\n//Start & setup game\r\nstartButton.addEventListener(\"click\", () => {\r\n  startSound.playbackRate = 1.2;\r\n  startSound.play();\r\n  startButton.disabled = true;\r\n  const lvlBoard = document.querySelector(\".lvl\");\r\n  let vieBoard = document.querySelector(\".vie\");\r\n  let thend = document.querySelector(\".thend\");\r\n\r\n  vieBoard.innerHTML = 5;\r\n  thend.style.top = \"90%\";\r\n  timeUp = false;\r\n  vie = 5;\r\n  lvl = 1;\r\n  vitMin = 1400;\r\n  vitMax = 2200;\r\n  lvlBoard.innerHTML = lvl;\r\n  // oneLife();\r\n  peep();\r\n\r\n  setTimeout(function () {\r\n    oneLife();\r\n  }, randTime(1500, 8000));\r\n\r\n  setTimeout(() => {\r\n    timeUp = true;\r\n    startButton.disabled = false;\r\n    if (vie >= 0) {\r\n      lvl = lvl + 1;\r\n      startButton.disabled = true;\r\n      nextButton.disabled = false;\r\n      lvlBoard.innerHTML = lvl;\r\n    }\r\n  }, 10000);\r\n});\r\n\r\n//Next LVL\r\nnextButton.addEventListener(\"click\", () => {\r\n  const lvlBoard = document.querySelector(\".lvl\");\r\n  nextSound.play();\r\n  nextButton.disabled = true;\r\n  timeUp = false;\r\n\r\n  peep();\r\n  setTimeout(function () {\r\n    oneLife();\r\n  }, randTime(1500, 8000));\r\n\r\n  vitMax = vitMax / 1.2;\r\n  vitMin = vitMin / 1.2;\r\n  setTimeout(() => {\r\n    timeUp = true;\r\n    startButton.disabled = false;\r\n    if (vie >= 0) {\r\n      lvl = lvl + 1;\r\n      startButton.disabled = true;\r\n      nextButton.disabled = false;\r\n      lvlBoard.innerHTML = lvl;\r\n    }\r\n  }, 10000);\r\n});\r\n//ecoute des events Plateau\r\nboard.addEventListener(\"click\", (e) => {\r\n  let vieBoard = document.querySelector(\".vie\");\r\n  let thend = document.querySelector(\".thend\");\r\n  // console.log(e.target.parentElement.classList);\r\n  if (\r\n    e.target.classList.contains(\"mole\") &&\r\n    e.target.parentElement.classList.contains(\"up\")\r\n  ) {\r\n    coin.playbackRate = 2.2;\r\n    coin.play();\r\n    e.target.parentElement.classList.remove(\"up\");\r\n  } else if (\r\n    e.target.classList.contains(\"mole\") &&\r\n    e.target.parentElement.classList.contains(\"up2\")\r\n  ) {\r\n    coin.playbackRate = 2.2;\r\n    coin.play();\r\n    //console.log(\"vie\", e.target.parentElement);\r\n    vie = vie + 1;\r\n    vieBoard.innerHTML = vie;\r\n    e.target.parentElement.classList.remove(\"up2\");\r\n  } else {\r\n    //console.log(\"Noooooo!\");\r\n    Bump.play();\r\n    vie = vie - 1;\r\n    vieBoard.innerHTML = vie;\r\n    //console.log(vie);\r\n  }\r\n  if (vie < 0) {\r\n    endSound.play();\r\n    vieBoard.innerHTML = \"Game Over\";\r\n    thend.style.top = \"-90%\";\r\n  }\r\n});\r\n"]}